fc61175 chore: refactor, fix test and update ci workflow
