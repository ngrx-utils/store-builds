{"version":3,"file":"store.umd.js","sources":["../../../modules/store/src/module.ts","../../../modules/store/src/select.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { NgrxSelect } from './select';\n\n@NgModule({\n  providers: [NgrxSelect]\n})\nexport class NgrxUtilsModule {}\n","import { Injectable } from '@angular/core';\nimport { Store } from '@ngrx/store';\nimport { map } from 'rxjs/operator/map';\nimport { pluck } from 'rxjs/operator/pluck';\nimport { distinctUntilChanged } from 'rxjs/operator/distinctUntilChanged';\n\n@Injectable()\nexport class NgrxSelect {\n  /**\n   * @internal\n   */\n  static store: Store<any> | undefined = undefined;\n\n  connect(store: Store<any>) {\n    NgrxSelect.store = store;\n  }\n}\n\nexport function Select<T, K>(mapFn: (state: T) => K): (target: any, name: string) => void;\nexport function Select(key?: string, ...paths: string[]): (target: any, name: string) => void;\nexport function Select<T, K>(pathOrMapFn?: ((state: T) => K) | string, ...paths: string[]) {\n  return function(target: any, name: string): void {\n    let mapped$: Store<any>;\n    const source$ = NgrxSelect.store;\n\n    if (!source$) {\n      throw new Error('NgrxSelect not connected to store!');\n    }\n\n    if (!pathOrMapFn) {\n      pathOrMapFn = name;\n    }\n\n    if (typeof pathOrMapFn === 'string') {\n      mapped$ = pluck.call(source$, pathOrMapFn, ...paths);\n    } else if (typeof pathOrMapFn === 'function') {\n      mapped$ = map.call(source$, pathOrMapFn);\n    } else {\n      throw new TypeError(\n        `Unexpected type '${typeof pathOrMapFn}' in select operator,` + ` expected 'string' or 'function'`\n      );\n    }\n    if (delete target[name]) {\n      Object.defineProperty(target, name, {\n        get: () => {\n          return distinctUntilChanged.call(mapped$);\n        },\n        enumerable: true,\n        configurable: true\n      });\n    }\n  };\n}\n"],"names":["NgModule","distinctUntilChanged","map","pluck","Injectable"],"mappings":";;;;;;;;;;ACAA,IAAA,UAAA,kBAAA,YAAA;IAAA,SAAA,UAAA,GAAA;;;;;;IAaE,UAAF,CAAA,SAAA,CAAA,OAAS,GAAP,UAAQ,KAAiB,EAA3B;QACI,UAAU,CAAC,KAAK,GAAG,KAAK,CAAC;KAC1B,CAAH;;CAfA,EAAA,CAAA,CAAA;;;;AAWA,UAAA,CAAA,KAAA,GAAyC,SAAS,CAAlD;;IALA,EAAA,IAAA,EAACI,eAAU,EAAX;;;;;;;;;;AAcA,SAAA,MAAA,CAA6B,WAAwC,EAArE;IAAuE,IAAvE,KAAA,GAAA,EAAA,CAAyF;IAAzF,KAAuE,IAAvE,EAAA,GAAA,CAAyF,EAAlB,EAAvE,GAAA,SAAA,CAAA,MAAyF,EAAlB,EAAvE,EAAyF,EAAzF;QAAuE,KAAvE,CAAA,EAAA,GAAA,CAAA,CAAA,GAAA,SAAA,CAAA,EAAA,CAAA,CAAyF;;IACvF,OAAO,UAAS,MAAW,EAAE,IAAY,EAA3C;QACI,qBAAI,OAAmB,CAAC;QACxB,qBAAM,OAAO,GAAG,UAAU,CAAC,KAAK,CAAC;QAEjC,IAAI,CAAC,OAAO,EAAE;YACZ,MAAM,IAAI,KAAK,CAAC,oCAAoC,CAAC,CAAC;SACvD;QAED,IAAI,CAAC,WAAW,EAAE;YAChB,WAAW,GAAG,IAAI,CAAC;SACpB;QAED,IAAI,OAAO,WAAW,KAAK,QAAQ,EAAE;YACnC,OAAO,GAAGD,WAAK,CAAC,IAAI,CAA1B,KAAA,CAAgBA,WAAK,EAArB,CAA2B,OAAO,EAAE,WAAW,CAA/C,CAAA,MAAA,CAAoD,KAAK,CAAzD,CAA0D,CAAC;SACtD;aAAM,IAAI,OAAO,WAAW,KAAK,UAAU,EAAE;YAC5C,OAAO,GAAGD,OAAG,CAAC,IAAI,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC;SAC1C;aAAM;YACL,MAAM,IAAI,SAAS,CACjB,mBADR,GAC4B,OAAO,WAAW,GAD9C,uBACqE,GAAG,kCAAkC,CACnG,CAAC;SACH;QACD,IAAI,OAAO,MAAM,CAAC,IAAI,CAAC,EAAE;YACvB,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,IAAI,EAAE;gBAClC,GAAG,EAAE,YAAb;oBACU,OAAOD,yCAAoB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;iBAC3C;gBACD,UAAU,EAAE,IAAI;gBAChB,YAAY,EAAE,IAAI;aACnB,CAAC,CAAC;SACJ;KACF,CAAC;CACH;;;;;ADpDD,IAAA,eAAA,kBAAA,YAAA;IAAA,SAAA,eAAA,GAAA;;;CAAA,EAAA,CAAA,CAAA;;IAGA,EAAA,IAAA,EAACD,aAAQ,EAAT,IAAA,EAAA,CAAU;gBACR,SAAS,EAAE,CAAC,UAAU,CAAC;aACxB,EAAD,EAAA;;;;;;;;;;;;;;;;;"}