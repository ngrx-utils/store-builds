!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("@angular/core"),require("@ngrx/store"),require("rxjs/operators/pluck"),require("rxjs/Observable"),require("rxjs/operators/takeUntil")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@ngrx/store","rxjs/operators/pluck","rxjs/Observable","rxjs/operators/takeUntil"],r):r((e.ngrxUtils=e.ngrxUtils||{},e.ngrxUtils.store={}),e.ng.core,e.ngrx.store,e.pluck,e.Rx,e.takeUntil)}(this,function(e,r,t,o,n,i){"use strict";var c=function(){function e(){}return e.prototype.connect=function(r){e.store=r},e}();c.store=void 0,c.decorators=[{type:r.Injectable}],c.ctorParameters=function(){return[]};var p=function(){return function(e,r,t){if(t)throw new Error("Only import NgrxSelectModule to top level module like AppModule");e.connect(r)}}();p.decorators=[{type:r.NgModule,args:[{providers:[c]}]}],p.ctorParameters=function(){return[{type:c},{type:t.Store},{type:p,decorators:[{type:r.SkipSelf},{type:r.Optional}]}]};var u=function(){return function(e){if(e)throw new Error("Only import NgrxUtilsModule to top level module like AppModule")}}();u.decorators=[{type:r.NgModule,args:[{exports:[p]}]}],u.ctorParameters=function(){return[{type:u,decorators:[{type:r.SkipSelf},{type:r.Optional}]}]};var a=function(){function e(){this.workerFunctionToUrlMap=new WeakMap,this.promiseToWorkerMap=new WeakMap}return e.prototype.run=function(e,r){var t=this.getOrCreateWorkerUrl(e);return this.runUrl(t,r)},e.prototype.runUrl=function(e,r){var t=new Worker(e),o=this.createPromiseForWorker(t,r),n=this.createPromiseCleaner(o);return this.promiseToWorkerMap.set(o,t),o.then(n).catch(n),o},e.prototype.terminate=function(e){return this.removePromise(e)},e.prototype.getWorker=function(e){var r=this.promiseToWorkerMap.get(e);if(r)return r;throw new Error("Could not find Worker for promise")},e.prototype.createPromiseForWorker=function(e,r){return new Promise(function(t,o){e.addEventListener("message",function(e){return t(e.data)}),e.addEventListener("error",o),e.postMessage(r)})},e.prototype.getOrCreateWorkerUrl=function(e){if(!this.workerFunctionToUrlMap.has(e)){var r=this.createWorkerUrl(e);return this.workerFunctionToUrlMap.set(e,r),r}return this.workerFunctionToUrlMap.get(e)},e.prototype.createWorkerUrl=function(e){var r=e.toString(),t=new Blob(["\n            self.addEventListener('message', function(e) {\n                postMessage(("+r+")(e.data));\n            });\n        "],{type:"text/javascript"});return URL.createObjectURL(t)},e.prototype.createPromiseCleaner=function(e){var r=this;return function(t){return r.removePromise(e),t}},e.prototype.removePromise=function(e){var r=this.promiseToWorkerMap.get(e);return r&&r.terminate(),this.promiseToWorkerMap.delete(e),e},e}();a.decorators=[{type:r.Injectable}],a.ctorParameters=function(){return[]};var s=function(){return function(){}}();s.decorators=[{type:r.NgModule,args:[{providers:[a]}]}],s.ctorParameters=function(){return[]};var l=Symbol("destroy$");var f=function(){return function(){this.$implicit=null,this.ngLet=null}}(),d=function(){function e(e,r){this._context=new f,e.createEmbeddedView(r,this._context)}return Object.defineProperty(e.prototype,"ngLet",{set:function(e){this._context.$implicit=this._context.ngLet=e},enumerable:!0,configurable:!0}),e}();d.decorators=[{type:r.Directive,args:[{selector:"[ngLet]"}]}],d.ctorParameters=function(){return[{type:r.ViewContainerRef},{type:r.TemplateRef}]},d.propDecorators={ngLet:[{type:r.Input}]};var y=function(){return function(){}}();y.decorators=[{type:r.NgModule,args:[{declarations:[d],exports:[d]}]}],y.ctorParameters=function(){return[]},e.Select=function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return function(t,o){if("function"!=typeof e)throw new TypeError("Unexpected type '"+typeof e+"' in select operator, expected 'function'");var n=Object.getOwnPropertyDescriptor(t,o);delete t[o]&&Object.defineProperty(t,o,Object.assign({},n,{get:function(){var t,o=c.store;if(!o)throw new Error("NgrxSelect not connected to store!");return(t=o.select(e)).pipe.apply(t,r)}}))}},e.Pluck=function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return function(t,n){var i;if(e||(e=n),"string"!=typeof e)throw new TypeError("Unexpected type '"+typeof e+"' in pluck operator, expected 'string'");i=r.length?[e].concat(r):e.split(".");var p=Object.getOwnPropertyDescriptor(t,n);delete t[n]&&Object.defineProperty(t,n,Object.assign({},p,{get:function(){var e=c.store;if(!e)throw new Error("NgrxSelect not connected to store!");return e.pipe(o.pluck.apply(void 0,i))}}))}},e.NgrxSelectModule=p,e.Dispatch=function(){return function(e,r,t){var o=t.value;if("function"!=typeof o)throw new TypeError("Unexpected type "+typeof o+" of property "+r+", expected 'function'");return t.value=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=c.store;if(!t)throw new Error("NgrxSelect not connected to store!");var n=o.apply(this,e);if("object"!=typeof n||"object"==typeof n&&!("type"in n))throw new TypeError("Unexpected action in method return type, expected object of type 'Action'");return t.dispatch(n),n},t}},e.NgrxUtilsModule=u,e.WebWorkerService=a,e.WebWorkerModule=s,e.untilDestroy=function(e){return void 0===e[l]&&function(e){e[l]=new n.Observable(function(r){var t=e.ngOnDestroy;if(!t)throw new Error("untilDestroy operator needs the component to have an ngOnDestroy method");return e.ngOnDestroy=function(){r.next(),r.complete(),t.call(e)},function(r){return e[l]=void 0}})}(e),i.takeUntil(e[l])},e.pluck=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return o.pluck.apply(void 0,e)},e.NgLetDirective=d,e.NgLetModule=y,e.ɵa=c,e.ɵb=f,Object.defineProperty(e,"__esModule",{value:!0})});