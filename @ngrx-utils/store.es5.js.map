{"version":3,"file":"store.es5.js","sources":["../../../modules/store/src/module.ts","../../../modules/store/src/select.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { NgrxSelect } from './select';\n\n@NgModule({\n  providers: [NgrxSelect]\n})\nexport class NgrxUtilsModule {}\n","import { Injectable } from '@angular/core';\nimport { Store } from '@ngrx/store';\nimport { map } from 'rxjs/operator/map';\nimport { pluck } from 'rxjs/operator/pluck';\nimport { distinctUntilChanged } from 'rxjs/operator/distinctUntilChanged';\n\n@Injectable()\nexport class NgrxSelect {\n  /**\n   * @internal\n   */\n  static store: Store<any> | undefined = undefined;\n\n  connect(store: Store<any>) {\n    NgrxSelect.store = store;\n  }\n}\n\nexport function Select<T, K>(mapFn: (state: T) => K): (target: any, name: string) => void;\nexport function Select(key?: string, ...paths: string[]): (target: any, name: string) => void;\nexport function Select<T, K>(pathOrMapFn?: ((state: T) => K) | string, ...paths: string[]) {\n  return function(target: any, name: string): void {\n    let mapped$: Store<any>;\n    const source$ = NgrxSelect.store;\n\n    if (!source$) {\n      throw new Error('NgrxSelect not connected to store!');\n    }\n\n    if (!pathOrMapFn) {\n      pathOrMapFn = name;\n    }\n\n    if (typeof pathOrMapFn === 'string') {\n      mapped$ = pluck.call(source$, pathOrMapFn, ...paths);\n    } else if (typeof pathOrMapFn === 'function') {\n      mapped$ = map.call(source$, pathOrMapFn);\n    } else {\n      throw new TypeError(\n        `Unexpected type '${typeof pathOrMapFn}' in select operator,` + ` expected 'string' or 'function'`\n      );\n    }\n    if (delete target[name]) {\n      Object.defineProperty(target, name, {\n        get: () => {\n          return distinctUntilChanged.call(mapped$);\n        },\n        enumerable: true,\n        configurable: true\n      });\n    }\n  };\n}\n"],"names":["distinctUntilChanged","map","pluck"],"mappings":";;;;;;;;ACAA;IAAA;;;;;;IAaE,4BAAO,GAAP,UAAQ,KAAiB;QACvB,UAAU,CAAC,KAAK,GAAG,KAAK,CAAC;IAC7B,CAAG;;CAfH;;;;AAWA,UAAA,CAAA,KAAA,GAAyC,SAAS,CAAlD;;IALA,EAAA,IAAA,EAAC,UAAU,EAAX;;;;;;;;;;AAcA,gBAA6B,WAAwC;IAAE,eAAkB;SAAlB,UAAkB,EAAlB,qBAAkB,EAAlB,IAAkB;QAAlB,8BAAkB;;IACvF,MAAF,CAAS,UAAS,MAAW,EAAE,IAAY;QACvC,IAAJ,gBAAA,CAAQ,OAAmB,CAAC;QACxB,IAAJ,gBAAA,CAAU,OAAO,GAAG,UAAU,CAAC,KAAK,CAAC;QAEjC,EAAJ,CAAA,CAAQ,CAAC,OAAO,CAAhB,CAAkB,CAAlB;YACM,MAAM,IAAI,KAAK,CAAC,oCAAoC,CAAC,CAAC;QAC5D,CAAK;QAED,EAAJ,CAAA,CAAQ,CAAC,WAAW,CAApB,CAAsB,CAAtB;YACM,WAAW,GAAG,IAAI,CAAC;QACzB,CAAK;QAED,EAAJ,CAAA,CAAQ,OAAO,WAAW,KAAK,QAAQ,CAAvC,CAAyC,CAAzC;YACM,OAAO,GAAGE,OAAK,CAAC,IAAI,OAAVA,OAAK,GAAM,OAAO,EAAE,WAAW,SAAK,KAAK,EAAC,CAAC;QAC3D,CAAK;QAAL,IAAA,CAAW,EAAX,CAAA,CAAe,OAAO,WAAW,KAAK,UAAU,CAAhD,CAAkD,CAAlD;YACM,OAAO,GAAGD,KAAG,CAAC,IAAI,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC;QAC/C,CAAK;QAAL,IAAA,CAAW,CAAX;YACM,MAAM,IAAI,SAAS,CACjB,sBAAoB,OAAO,WAAW,0BAAuB,GAAG,kCAAkC,CACnG,CAAC;QACR,CAAK;QACD,EAAJ,CAAA,CAAQ,OAAO,MAAM,CAAC,IAAI,CAAC,CAA3B,CAA6B,CAA7B;YACM,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,IAAI,EAAE;gBAClC,GAAG,EAAE;oBACH,MAAV,CAAiBD,sBAAoB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBACpD,CAAS;gBACD,UAAU,EAAE,IAAI;gBAChB,YAAY,EAAE,IAAI;aACnB,CAAC,CAAC;QACT,CAAK;IACL,CAAG,CAAC;AACJ,CAAC;;;;;ADpDD;IAAA;;;CAAA;;IAGA,EAAA,IAAA,EAAC,QAAQ,EAAT,IAAA,EAAA,CAAU;gBACR,SAAS,EAAE,CAAC,UAAU,CAAC;aACxB,EAAD,EAAA;;;;;;;;;;;;;;;;;;;;"}